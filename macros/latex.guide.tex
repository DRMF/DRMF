\documentclass[twoside]{article}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{DLMFmath}
\usepackage{natbib}
\usepackage{supertabular}
\usepackage{multirow}
\usepackage[colorlinks=true,citecolor=blue]{hyperref}
\usepackage{lscape}
\newcommand{\DLMF}{{\sc DLMF}}
\newcommand{\HTML}{\textsc{HTML}}
\newcommand{\XML}{\textsc{XML}}
\newcommand{\PDF}{\textsc{PDF}}
\newcommand{\MathML}{\textsc{MathML}}
\newcommand{\OpenMath}{{\sc OpenMath}}
\newcommand{\package}[1]{\texttt{#1}}
\newcommand{\token}[1]{\texttt{#1}}
\newcommand{\BibTeX}{Bib\TeX}
\newcommand{\NOTE}[1]{\paragraph{NOTE:}\textit{#1}}
\newcommand{\BS}{$\backslash$}
\setcounter{topnumber}{3}
\setcounter{bottomnumber}{3}
\newenvironment{Table}[1]{%
   \begin{table}[htb]\hrule\begin{centering}\caption{#1}}{%
   \par\end{centering}\hrule\end{table}}
\newenvironment{Tabular}[1]{%
   \begingroup\def\arraystretch{1.3}\small \begin{tabular}{#1}}{%
   \end{tabular}\endgroup}
\newenvironment{Description}{%
   \begingroup\def\arraystretch{1.3}\small\begin{description}}{%
   \end{description}\endgroup}

\title{DLMF \LaTeX\ Guide}
\author{Bruce R.~Miller \\ Email: \url{bruce.miller@nist.gov}}
\begin{document}
\maketitle
\section{Introduction}\label{sec:intro}
We have chosen \LaTeX\ (specifically \LaTeX2e)  as the primary format for accepting 
material because of its familiarity and its expressiveness, particularly 
for mathematics.

However, given the effort and expense involved in collecting information for the \DLMF, 
it behooves us to assure a long life for this material and that it be usable
in a wide variety of ways.  
This material will not simply be typeset for printing.
It will be targeted at other media (e.g.~the Web, CD-ROM);
rendered in various representations (e.g.~\HTML, \XML, \PDF, \MathML)
and  in different formats (e.g.~single and double column, differing page sizes),
and even reassembled into virtual documents.
Consequently, we focus on \textit{logical} markup rather than detailed
\textit{presentation}
markup; presentation issues will be dealt with inside the document class itself.

In general, we have attempted to keep as close to standard \LaTeX\ practices
as possible, and to base the \DLMF\ document class on the \token{article} class.
Wherever possible, we have redefined the existing markup to fulfill 
the needs of this project.  New macros have been defined to minimize ambiguities 
in the logical intent of the markup.

General issues of content, style and organization are discussed in the
Authors Guide.  This guide focuses on the \LaTeX\ markup we employ.
Also consult the sample chapter on Airy functions (Chapter AI)
to see these ideas in practice.
The complete package of \DLMF\ style files, along with examples and other supplementary
materials, is available for download (See Appendix \ref{app:manifest}).

\section{Document Structure}\label{sec:structure}
Each chapter can be processed as a stand-alone \LaTeX\ document, using
the \token{DLMF} document class.  The first line of your document should contain
\begin{verbatim}
  \documentclass[option,...]{DLMF}
\end{verbatim}
(the brackets can be omitted if no class options are used;
 see Table \ref{tab:options}).  
\begin{Table}{\DLMF\ Document class options.\label{tab:options}}
\begin{Description}
\item[\token{twocolumn}] For two column printing (the default). 
\item[\token{onecolumn}] For single column printing.
\item[\token{annotated}] For editorial/proofreading purposes;
  displays the main material in the left column and all meta information
  in the right column, roughly aligned with the material it corresponds to.
\hrule
\item[\token{print}] Prepare the document in its print form, excluding material
  that is marked for electronic formats only (see \S~\ref{sec:exclude}).
\item[\token{electronic}] Prepare the document in its electronic form, excluding
  material that is marked for print formats only (see \S~\ref{sec:exclude}).
  Note that this does not mean you cannot print the document.
\item The default is to include both sets of material, print and electronic,
  with marginal markings along each block indicating the type.
\hrule
\item[\token{noindex}] Disables printing of the keyword index at the end of 
  the chapter (see \S~\ref{sec:meta}).
\item[\token{nometa}] Disables printing a listing of metadata at the end of 
  the chapter (see \S~\ref{sec:meta}).
\end{Description}
\end{Table}

This document class is an extension of the \token{article} class, and includes
various other standard \LaTeX\ packages (See Appendix \ref{app:manifest}).

\subsection{Frontmatter}\label{sec:frontmatter}
The Frontmatter commands for establishing author, title, etc.~are listed
in Table \ref{tab:frontmatter} (motivated by the RevTeX4 package).
Multiple authors are specified by separate \verb|\author|
mark-up rather than combining them with \verb|\and|. The additional
mark-up for affiliation, etc., apply to the preceding author.
Additionally, the macros \verb|\email| and \verb|\URL| (see \S~\ref{sec:meta}),
may be useful to provide additional contact information; these should be placed
inside the affiliation or acknowledgements text, as appropriate.

The title page for each chapter is produced by \verb|\maketitle|.
It will include an automatically generated table of contents for the chapter.
Additionally, a `gallery' of eye-catching but relevant images related
to the subject at hand may be supplied.  [Each can have a brief separately
supplied text describing the relevance of the image to the subject.]
See Chapter AI for an example.

\begin{Table}{Frontmatter commands.\label{tab:frontmatter}}
\begin{Description}
\item[\texttt{\BS thischapter\{\textit{chapcode}\}}] Identifies the chapter.
   (see the Authors Guide, Appendix)
\item[\texttt{\BS title\{\textit{title}\}}] Gives the chapter title.
\item[\texttt{\BS author\{\textit{author}\}}] Gives a single author.
\item[\texttt{\BS affiliation\{\textit{text}\}}] 
   Gives author's  affiliation.
\item[\texttt{\BS acknowledgements\{\textit{text}\}}] Gives additional information.
\item[\texttt{\BS galleryitem\{\textit{name}\}\{\textit{file}\}}]
  Specifies a gallery item.  The \textit{name} provides a mechanism
to link to a secondary web page describing the image and its relation
to the subject.  The \textit{file} is the filename of an image
(passed to \verb|\includegraphics|).
\end{Description}
\end{Table}

\subsection{Sectioning Commands}\label{sec:sectioning}
Sections are marked up in usual \LaTeX\ fashion,
but note that we are also using the \verb|\part| command for the major
subdivisions of each chapter.
See the Authors Guide and Chapter AI for guidance.  For example, the AI chapter
specifies Mathematical Properties, Applications, Computation, and References
as parts.

\subsection{Labels}\label{sec:labels}
\begin{Table}{The structure of internal identifiers\label{tab:labels}.}
\begin{Tabular}{llp{2.5in}}
\textit{Entity} & \textit{Identifier} & \textit{Notes}\\\hline
Chapter & \texttt{ch:}\textit{CH}
 & \textit{CH} is the chapter code;
   See the Appendix of the Authors guide. \\
Part  & \texttt{pt:}\textit{CH}.\textit{PT} 
 & \textit{PT} is the code for the part.\\
Section  & \texttt{sec:}\textit{CH}.\textit{SC} 
 & \textit{SC} is the code for the section.\\
Subsection  & \texttt{sec:}\textit{CH}.\textit{SC}.\textit{SS}
 & \textit{SS} is the code for the subsection.\\
Equation  & \texttt{eq:}\textit{CH}.\textit{SC}.\textit{EQ}
 & \textit{EQ} is the code for the equation.\\
Figure  & \texttt{fig:}\textit{CH}.\textit{SC}.\textit{FG}
 & \textit{FG} is the code for the figure.\\
Table  & \texttt{tab:}\textit{CH}.\textit{SC}.\textit{TB}
 & \textit{TB} is the code for the table.\\
\end{Tabular}
\end{Table}
Every entity that might be referenced, such as sections, equations, figures 
or tables, should have a
symbolic identifier assigned using \verb|\label{id}|.  For example,
\begin{verbatim}
   \section{Notation}\label{sec:AI.RX}
\end{verbatim}
This symbolic identifier (eg.~\texttt{sec:AI.RX}) will be the permanent
internal ID to locate various entities in the database.
(The \verb|\ref{id}| command is used within documents to refer to an entity.)

The structure of identifiers to be used in the \DLMF\ is given in
Table \ref{tab:labels}.  It reflects the numbering of equations,
figures and tables within each section.  A table of metadata,
normally printed at the end of the chapter, is helpful for checking
what ID is associated with which equation number.

Most codes in the table may be chosen freely, but should be short
and be unique within the containing unit.

\subsection{Column Layout}\label{sec:columns}
The material may be formatted in either one or two column formats.  
We have adapted the \package{multicol} package to fulfill this need.
Certain parts, such as frontmatter, title pages and so on, are arranged to
work consistently in either form, and most material will also work in either form.
However, occasional blocks of material may require special treatment
when in two column mode,  such as a particularly wide table, or a formula 
that can not be broken to fit into a narrow column (see comments in
\S~\ref{sec:dispmath} below).
In those cases, we provide an environment to process the contained
material in one column mode, set off from adjacent material by horizontal
rules:
\begin{verbatim}
   \begin{onecolumn}
      ...
   \end{onecolumn}
\end{verbatim}
This environment has no effect if processing is already in one column mode.
It should be used only at `top-level', that is not contained within any other
environment (other than \token{document}).  It can contain a whole sectional unit
if needed.

\subsection{Electronic versus Print formats}\label{sec:exclude}
Some material is intended only for electronic versions of the document
(such as the Software section), or only for printed versions.  This material
is indicated by including it within one of the following environments:
\begin{verbatim}
   \begin{printonly}
     This material will only appear in print versions.
   \end{printonly}
   \begin{electroniconly}
     This material will only appear in electronic versions.
   \end{electroniconly}
\end{verbatim}
Note that the \verb|\begin| and \verb|\end| commands for these environments
must appear on a line by themselves, with no leading space.
Avoid using these environments in situations where their inclusion or omission
will alter the numbering of neighboring elements outside the environment.

The \token{printonly} and \token{electroniconly} environments wrap paragraph material.
For short phrases, the macros \verb|\onlyprint{text}| and 
\verb|\onlyelectronic{text}| may be used.

The \token{print} and \token{electronic} document options (Table \ref{tab:options})
are used to select the format used.
When references and citations appear in an excluded block,
changing these options may require re-running \BibTeX\ and \LaTeX\ to
get the cross references correct.

\section{Mathematics Mark-up}\label{sec:math}
The \DLMF\ styles include certain AMS packages such as \package{amsmath} and
\package{amsfonts}, and so the mathematical markup
from these packages is available for use.
However, please do not use the exotic formatting environments
defined by the AMS packages; we have incorporated Michael Downes' \package{breqn} 
package which provides automatic line breaking for mathematical formulas.  
See \S~\ref{sec:dispmath} for discussion of the math environments.

In order to provide consistent presentation of mathematical formulas, and 
to reduce ambiguities in the mathematical meaning, several higher level
macros are defined.  These are listed in \S~\ref{sec:genmath} 
and \S~\ref{sec:specfun}.
Please use these macros when they convey the mathematical intent.

\subsection{Bracketing}
Unless conventions dictate use of braces or brackets,
properly sized parentheses are to be used. (The commands 
\verb|\left(|, \verb|\right)|, \verb|\left\{|, \ldots are used to get proper sizing.)

\subsection{Displayed Equations}\label{sec:dispmath}
The \package{breqn} package for displaying mathematics automatically breaks
and aligns formulas into multiple lines according to the column width.  
This eliminates confusing presentation mark-up for manually breaking the formula
and allows the input to be more concise, semantic and readable.  
Line breaking and alignment hints can still be given, however, 
and in some cases may be needed.

In most cases, the standard \LaTeX\ \token{equation} environment
is all that is required.  The following formula demonstrates the environment
as well as the use of the \verb|\constraint| command and other
 metadata (See \S~\ref{sec:meta}) in formulas.
\begin{verbatim}
  \begin{equation}\label{eq:AI.AS.AI}
    \AiryAi(z)  \sim  \frac{e^{-\zeta}}{2\sqrt{\pi}z^{1/4}}
                    \sum_{s=0}^{\infty}\opminus^s\frac{u_s}{\zeta^s}
    \constraint{$|\ph z|<\pi$}.
    \note{See \eqref{eq:AI.AS.Z} for $\zeta$, $u$ and $v$.}
  \end{equation}
\end{verbatim}
produces
\[
\hbox to \textwidth{
{\small AI.7.2}\hfill
 $\displaystyle \AiryAi(z)  \sim  \frac{e^{-\zeta}}{2\sqrt{\pi}z^{1/4}}
                  \sum_{s=0}^{\infty}\opminus^s\frac{u_s}{\zeta^s}$,
 \hfill
 $|\ph z|<\pi$.}
\]
Groups of related equations can be grouped more tightly and 
aligned by wrapping an \token{equationgroup} environment around the set of equations.
(Note that alignment is not yet implemented).
\begin{verbatim}
\begin{equationgroup}
\begin{equation}\label{eq:AI.DE.A0}
 \AiryAi(0)=\frac{1}{3^{2/3}\Gamma(\tfrac{2}{3})}=0.35502\;80539
 \origref[with more digits]{10.4.4},
\end{equation}
\begin{equation}\label{eq:AI.DE.AP0}
 \AiryAi'(0)=-\frac{1}{3^{1/3}\Gamma(\tfrac{1}{3})}=-0.25881\;94038
 \origref[with more digits]{10.4.5},
\end{equation}
\end{equationgroup}
\end{verbatim}
produces
\[
\vbox{
\hbox to \textwidth{
\hbox to 0pt {\small AI.2.3}\hspace{2cm}
  $\AiryAi(0)  =  \frac{1}{3^{2/3}\Gamma(\tfrac{2}{3})} =  0.35502\;80539$
\hfill}
\vskip5pt
\hbox to \textwidth{
\hbox to 0pt {\small AI.2.4}\hspace{2cm}
  $\AiryAi'(0) =  -\frac{1}{3^{1/3}\Gamma(\tfrac{1}{3})} = -0.25881\;94038$
\hfill}}
\]

The \token{equationmix} environment is useful for a collection of short formulas
(possibly interspersed with text) that only warrant a single label
\footnote{In the previous version, \$ was used to delimit the formulas. We now recommend
using the \token{math} environment as it allows the software to get better control
on formula placement.}. 
Not only does this environment indicate that there are several formulas included,
it changes the line breaking method so that breaks occur between formulas,
rather than at relations or operators.
\begin{verbatim}
  \begin{equationmix}\label{eq:AI.AS.Z}
    \begin{math} \zeta = \tfrac{2}{3}z^{3/2} \end{math}, 
    \begin{math} u_0=1\end{math},
    \begin{math} v_0=1 \end{math},
    \begin{math}
       u_s = \frac{(2s+1)(2s+3)(2s+5) \cdots(6s-1)}{(216)^s s!}
     \end{math},
    \begin{math} v_s = -\frac{6s+1}{6s-1}u_s\end{math}.
  \end{equationmix}
\end{verbatim}
produces
\[
\vbox{
\hbox to \textwidth{
\hbox to 0pt {\small AI.7.1}\hspace{2cm}
    $\displaystyle \zeta = \tfrac{2}{3}z^{3/2}$, \quad
    $\displaystyle u_0=1$,\quad
    $\displaystyle v_0=1$, 
\hfill}
\hbox to \textwidth{\hspace{2.5cm}
    $\displaystyle u_s = \frac{(2s+1)(2s+3)(2s+5)\cdots(6s-1)}{(216)^s s!}$,
\hfill}
\hbox to \textwidth{\hspace{2.5cm}
    $\displaystyle v_s = -\frac{6s+1}{6s-1}u_s$.
\hfill}}
\]

Unnumbered equations are obtained using the `starred' versions of the above 
environments, eg.~ \verb|\begin{equation*} ...\end{equation*}|.  Unnumbered equations
should be used very sparingly, however.

\paragraph{Formatting Strategies}
The \package{breqn} package generally does a good job breaking formulas at
relations or binary operators.  One problematic case occurs in long
implied products which \package{breqn} does not know where to break.
Inserting a \verb|\*| at reasonable places in the formula suggests a break
point; if the formula ends up broken at that point the broken line
will end with a $\times$ symbol to clearly indicate the multiplication.

Other strategies will be documented here when discovered.

\subsection{Mathematical Constructs}\label{sec:genmath}
The mathematical macros in this section are defined in AMS or \DLMF\ style packages.
The appearance produced by each of these macros may be changed, subject to consensus
among the editors, but the macros should be used for their semantic intent.

\begin{Table}{Types and Constants Markup.\label{tab:typesmarkup}}
\begin{Tabular}{lll}
\textit{Macro} & \textit{Example} & \textit{Result} \\\hline
\verb|\Real| &\verb|\Real| & $\Real$ \\
\verb|\Complex| &\verb|\Complex| & $\Complex$ \\
\verb|\NatNumber| &\verb|\NatNumber| & $\NatNumber$ \\
\verb|\Integer| &\verb|\Integer| & $\Integer$ \\
\verb|\PosInteger| &\verb|\PosInteger| & $\PosInteger$ \\
\verb|\NonNegInteger| &\verb|\NonNegInteger| & $\NonNegInteger$ \\
\verb|\Rational| &\verb|\Rational| & $\Rational$ \\
\verb|\Polynomial| &\verb|\Polynomial| & $\Polynomial$ \\
\hline
\verb|\iunit| &\verb|\iunit| & $\iunit$ \\ 
\verb|\expe| &\verb|\expe| & $\expe$ \\ 
\verb|\cpi| &\verb|\cpi| & $\cpi$ \\ 
\verb|\EulerConstant| &\verb|\EulerConstant| & $\EulerConstant$ \\ 
\verb|\BoltzmannConstant| &\verb|\BoltzmannConstant| & $\BoltzmannConstant$ \\ 
\end{Tabular}
\end{Table}

\newbox\cfracexpr
\setbox\cfracexpr\hbox{\small\verb|b_0+\cfrac{a_1}{b_1+\cfrac{a_2}{b_2+\cdots}}|}%
\newbox\cfracexprD
\setbox\cfracexprD\hbox{\small\verb|\cfracstyle{d} b_0+\cfrac{a_1}{b_1+\cfrac{a_2}{b_2+\cdots}}|}%
\begin{Table}{Other Basic Mathematics Markup.\label{tab:mathmarkup}}
\begin{Tabular}{lll}
\textit{Macro} & \textit{Example} & \textit{Result} \\\hline
\verb|\realpart| &\verb|\realpart{z}| & $\realpart{z}$ \\
\verb|\imagpart| &\verb|\imagpart{z}| & $\imagpart{z}$ \\ 
\verb|\sign| & \verb|\sign(x)| & $\sign(x)$\\
\verb|\abs| & \verb|\abs(x)| & $\abs{x}$\\
\verb|\floor| & \verb|\floor{\ifrac{A}{B}}| & $\displaystyle\floor{\ifrac{A}{B}}$\\[2.0ex]
\verb|\ceiling| & \verb|\ceiling{\ifrac{A}{B}}| & $\displaystyle\ceiling{\ifrac{A}{B}}$\\
\verb|\divides| & \verb|a \divides b| & $ a \divides b$\\
\verb|\opminus| & \verb|\opminus^{p}| & $\displaystyle\opminus^{p}$\\
\hline
\verb|\frac| & \verb|\frac{a}{b}| & $\displaystyle\frac{a}{b}$\\
\verb|\tfrac| & \verb|\tfrac{a}{b}| & $\displaystyle\tfrac{a}{b}$\\
\verb|\ifrac| & \verb|\ifrac{a}{b}| & $\displaystyle\ifrac{a}{b}$\\
%%\verb|\cfrac| & \textit{See text}. &\\
\verb|\cfrac| & 
    \multicolumn{2}{l}{\copy\cfracexpr} \\
 &  \multicolumn{2}{r}{$\displaystyle b_0+\cfrac{a_1}{b_1+\cfrac{a_2}{b_2+\cdots}}$}
\\[2.0ex]
 &  \multicolumn{2}{l}{\copy\cfracexprD} \\
 &  \multicolumn{2}{r}{$\displaystyle \cfracstyle{d} b_0+\cfrac{a_1}{b_1+\cfrac{a_2}{b_2+\cdots}}$}
\\[2.0ex]
\hline
\verb|\midvert| & \verb|\left(\frac{A}{B}\midvert \frac{Q}{R}\right)| & $\displaystyle\left(\frac{A}{B}\midvert \frac{Q}{R}\right)$\\[2.0ex]
\verb|\midVert| & \verb|\left(\frac{A}{B}\midVert \frac{Q}{R}\right)| & $\displaystyle\left(\frac{A}{B}\midVert \frac{Q}{R}\right)$\\[2.0ex]
\hline
\verb|\Sci| & \verb|\Sci{1.234}{5}| & $\Sci{1.234}{5}$\\
\end{Tabular}
\end{Table}
A variant of the scientific notation macro \verb|\Sci| shown in Table \ref{tab:mathmarkup} 
assists in aligning numbers in tables.  The numbers are aligned on the decimal point.
For this to work, you need to allocate \emph{two} columns for the number, 
using the pattern \verb|r@{}l|. For example,
\par\noindent
\begin{minipage}{2in}
\begin{verbatim}
\begin{tabular}{lr@{}l}
a & \TSci{1.234}{5}\\
b & \TSci{0.123}{-4}\\
\end{tabular}
\end{verbatim}
\end{minipage}
$\Rightarrow$
\begin{tabular}{lr@{}l}
a & \TSci{12.34}{5}\\
b & \TSci{0.123}{-4}\\
\end{tabular}


\begin{Table}{Number Theory related Markup.\label{tab:numbermarkup}}
\begin{Tabular}{lll}
\textit{Macro} & \textit{Example} & \textit{Result} \\\hline
\verb|\binom| & \verb|\binom{a}{b}| & $\displaystyle\binom{a}{b}$ \\
\verb|\tbinom| & \verb|\tbinom{a}{b}| & $\displaystyle\tbinom{a}{b}$ \\
\verb|\multinomial| 
  &  \verb|\multinomial{n}{n_1, n_2\ldots, n_m}|
      &$\displaystyle\multinomial{n}{n_1, n_2\ldots, n_m}$ \\
\verb|\pochhammer| & \verb|\pochhammer{n}{m}|
     &$\displaystyle\pochhammer{n}{m}$\\
\verb|\psfactorial| & \verb|\psfactorial{a}{\kappa}|
     &$\displaystyle\psfactorial{a}{\kappa}$\\
\verb|\wigner| & \verb|\wigner{j_1}{j_2}{m_1}{m_2}{j}{m}|
  & $\displaystyle\wigner{j_1}{j_2}{m_1}{m_2}{j}{m}$ \\
\verb|\qFactorial| & \verb|\qFactorial{a}{q}{n}| & $\displaystyle\qFactorial{a}{q}{n}$\\
\verb|\qBinomial| & \verb|\qBinomial{n}{m}{q}| & $\displaystyle\qBinomial{n}{m}{q}$\\
%%%\verb|\BernoulliNumber| & \verb|\BernoulliNumber{n}| & $\displaystyle\BernoulliNumber{n}$\\
%%%\verb|\EulerNumber| & \verb|\EulerNumber{n}| & $\displaystyle\EulerNumber{n}$\\
\verb|\pgcd| & \verb|\pgcd{a_1,\ldots,a_n}| & $\pgcd{a_1,\ldots,a_n}$\\
\end{Tabular}
\end{Table}

\begin{Table}{Calculus Markup; Derivatives.\label{tab:derivmarkup}.}
\begin{Tabular}{lll}
\textit{Macro} & \textit{Example} & \textit{Result} \\\hline
\verb|\deriv| &\verb|\deriv{f}{x}| & $\displaystyle\deriv{f}{x}$ \\
              &\verb|\deriv{}{x}| & $\displaystyle\deriv{}{x}$ \\
              &\verb|\deriv[n]{f}{x}| & $\displaystyle\deriv[n]{f}{x}$ \\
\verb|\tderiv| &\verb|\tderiv[n]{f}{x}| & $\displaystyle\tderiv[n]{f}{x}$ \\
\verb|\ideriv| &\verb|\ideriv[n]{f}{x}| & $\displaystyle\ideriv[n]{f}{x}$ \\
\verb|\pderiv| &\verb|\pderiv[n]{f}{x}| & $\displaystyle\pderiv[n]{f}{x}$ \\
\verb|\tpderiv| &\verb|\tpderiv[n]{f}{x}| & $\displaystyle\tpderiv[n]{f}{x}$ \\
\verb|\ipderiv| &\verb|\ipderiv[n]{f}{x}| & $\displaystyle\ipderiv[n]{f}{x}$ \\
\verb|\Deriv| & \verb|\Deriv{z}| & $\displaystyle\Deriv{z}$ \\
              & \verb|\Deriv[n]{z}| & $\displaystyle\Deriv[n]{z}$ \\
\verb|\qDeriv| & \verb|\qDeriv[n]{q}{z}| & $\displaystyle\qDeriv[n]{q}{z}$ \\
\end{Tabular}
\end{Table}
For more complicated derivatives than those presented in Table \ref{tab:derivmarkup},
 consider a form such as \verb|\frac{\pdiff[3]{f}}{\pdiff{x}\pdiff{y}^2}|.

\begin{Table}{Calculus Markup; Integrals\label{tab:intmarkup}.}
\begin{Tabular}{lll}
\textit{Macro} & \textit{Example} & \textit{Result} \\\hline
\verb|\diff| & \verb|\diff{x}| & $\displaystyle\diff{x}$ \\
     & \verb|\diff[2]{x}| & $\displaystyle\diff[2]{x}$ \\
     & \verb|\int f \diff{x}| & $\displaystyle\int f \diff{x}$\\
\verb|\pdiff{x}| & \verb|\pdiff[2]{x}| & $\displaystyle\pdiff[2]{x}$ \\
\verb|\qdiff| & \verb|\qdiff[n]{q}{x}| & $\displaystyle\qdiff[n]{q}{x}$ \\
\verb|\fDiff| & \verb|\fDiff[z]| & $\displaystyle\fDiff[z]$ \\
\verb|\bDiff| & \verb|\bDiff[z]| & $\displaystyle\bDiff[z]$ \\
\verb|\cDiff| & \verb|\cDiff[z]| & $\displaystyle\cDiff[z]$ \\
\hline
\verb|\int|  & \verb|\int f\diff{x}| 
    & $\displaystyle\int f\diff{x}$\\
\verb|\iint|  & \verb|\iint f\diff{x}\diff{y}| 
    & $\displaystyle\iint f\diff{x}\diff{y}$\\
\verb|\iiint|  & \verb|\iiint f\diff{x}\diff{y}\diff{z}| 
    & $\displaystyle\iiint f\diff{x}\diff{y}\diff{z}$\\
\verb|\iiiint|  & \verb|\iiiint f\diff{u}\diff{x}\diff{y}\diff{z}| 
    & $\displaystyle\iiiint f\diff{u}\diff{x}\diff{y}\diff{z}$\\
\verb|\idotsint|  & \verb|\idotsint f\diff{x_1}\cdots\diff{x_n}| 
    & $\displaystyle\idotsint f\diff{x_1}\cdots\diff{x_n}$\\
\verb|\pvint| & \verb|\pvint_0^\infty f\diff{x}|&
     $\displaystyle\pvint_0^\infty f\diff{x}$\\
\verb|\oint| & \verb|\oint f\diff{x}|& $\displaystyle\oint f\diff{x}$\\
\hline
\verb|\Residue| & \verb|\Residue_{z=a}\{f\}| 
    & $\displaystyle\Residue_{z=a}\{f\}$ \\
\end{Tabular}
\end{Table}

\begin{Table}{Linear Algebra and Sets.\label{tab:matrixmarkup}}
\begin{Tabular}{lll}
\textit{Macro} & \textit{Example} & \textit{Result} \\\hline
\verb|\Vector| & \verb|\Vector{V}| & $\displaystyle\Vector{V}$ \\
\verb|\Matrix| & \verb|\Matrix{M}| & $\displaystyle\Matrix{M}$ \\
\verb|\transpose| & \verb|\transpose{\Matrix{X}}| & $\transpose{\Matrix{X}}$\\
\verb|\trace| & \verb|\trace \Matrix{X}| & $\trace \Matrix{X}$\\
\verb|\diag| & \verb|\diag \Matrix{X}| & $\diag \Matrix{X}$\\
\hline
\verb|\divergence| & \verb|\divergence \Vector{f}| & $\divergence \Vector{f}$\\
\verb|\gradient| & \verb|\gradient f| & $\gradient f$\\
\verb|\curl| & \verb|\curl \Vector{f}| & $\curl \Vector{f}$\\
\hline
\verb|\card| & \verb|\card{\mathcal{S}}| & $\card{\mathcal{S}}$\\
\end{Tabular}
\end{Table}

\clearpage

\subsection{Special Functions}\label{sec:specfun}
The presentation used for special functions is often rather quirky, both
hard to type, and hard to read (at least mechanically; by a parser attempting
to recognize the semantics).
To simplify typing manuscripts while achieving consistent formatting, and
(hopefully) still having a chance of automatic conversion to XML,
we have defined \LaTeX\ macros for each of the special functions.

We make a distinction between `naming' a function, and `evaluating' it,
as in
\[ \BesselJ{\nu} \mbox{ vs. } \BesselJ{\nu}@{x}. \]
We make a corresponding (if slightly artificial) distinction between a special function's
\textit{parameters} (the various sub- and super-scripts and other decorations
that help `name' the function) and it's \textit{arguments} (the list
of quantities, generally comma separated, that follow the function name).
The  macro's arguments are the special function's parameters (if any).
When simply naming the function, one would write the macro name
and the parameters, as in:
\[   \verb|\BesselJ{\nu}|  \rightarrow  \BesselJ{\nu} \]
When the arguments are also desired, they are introduced by following
the name with \verb|@| and then each of the arguments within braces \verb|{}|, as in:
\[   \verb|\BesselJ{\nu}@{x}|  \rightarrow  \BesselJ{\nu}@{x} \]
For a mnemonic, think of the function `at' a value.

A few other special cases are covered as well.  We might consider the Legendre function
to have an optional parameter, as such:
\par\noindent
\begin{centering}
\begin{Tabular}{lcl}
 \verb|\LegendreP{\nu}@{z}| &$\rightarrow$&  $\LegendreP{\nu}@{z}$\\
 \verb|\LegendreP[\mu]{\nu}@{z}| &$\rightarrow$&  $\LegendreP[\mu]{\nu}@{z}$
\end{Tabular}\\
\end{centering}

Often it is prefered to place primes or powers on the function before the
argument list.  The special function macros accommodate most sensible forms:
\par\noindent
\begin{centering}
\begin{Tabular}{lcl}
\verb|\BesselJ{\nu}|  &$\rightarrow$& $\BesselJ{\nu}$\\
\verb|\BesselJ{\nu}@{z}|  &$\rightarrow$& $\BesselJ{\nu}@{z}$\\
\verb|\BesselJ{\nu}'@{z}|  &$\rightarrow$& $\BesselJ{\nu}'@{z}$\\
\verb|\BesselJ{\nu}''@{z}|  &$\rightarrow$& $\BesselJ{\nu}''@{z}$\\
\verb|\BesselJ{\nu}^2@{z}|  &$\rightarrow$& $\BesselJ{\nu}^2@{z}$\\
\verb|\BesselJ{\nu}''^2@{z}|  &$\rightarrow$& $\BesselJ{\nu}''^2@{z}$\\
\verb|\BesselJ{\nu}^2''@{z}|  &$\rightarrow$& $\BesselJ{\nu}^2''@{z}$\\
\end{Tabular}\\
\end{centering}
Primes and powers are also allowed on functions that have optional superscripts,
like \verb|\LegendreP|, but only in the case where the optional superscript is omitted:
\par\noindent\begin{centering}
\begin{Tabular}{lcl}
\verb|\LegendreP{\nu}'@{z}|  &$\rightarrow$& $\LegendreP{\nu}'@{z}$\\
\end{Tabular}\\
\end{centering}
Although a power would clearly be inappropriate here, since it is confusing.
Where both parameters are used \emph{and} a prime is desired, \TeX\ will complain
of double superscripts, and so an alternative presentation should be sought.

Additionally, there are sometimes alternative ways of presenting the argument lists
which are selected by using multiple \verb|@|:
\par\noindent
\begin{centering}
\begin{Tabular}{lcl}
\verb|\sin@{x}|  &$\rightarrow$& $\sin@{x}$\\
\verb|\sin@@{x}|  &$\rightarrow$& $\sin@@{x}$\\
\verb|\HyperpFq{p}{q}@{a_1,\ldots a_p}{b_1,\ldots b_q}{z}| &$\rightarrow$& $\HyperpFq{p}{q}@{a_1,\ldots a_p}{b_1,\ldots b_q}{z}$\\
\verb|\HyperpFq{p}{q}@@{a_1,\ldots a_p}{b_1,\ldots b_q}{z}| &$\rightarrow$& $\HyperpFq{p}{q}@@{a_1,\ldots a_p}{b_1,\ldots b_q}{z}$\\
\end{Tabular}\\
\end{centering}

See Appendix \ref{app:specfuns} for a list of the predefined special function macros along
with the formats of thier argument lists, and alternate forms.
For any additional functions needed for a chapter, it would be helpful
to define a macro for it, and to preserve this distinction between parameters
and arguments.  The following macro defines a special function:
\[
\verb|\defSpecFun[|\textit{numparams}\verb|]{|\textit{format}\verb|}{|\textit{numargs}\verb|}| \]
Or for a macro with a single optional parameter
\[
\verb|\defSpecFun[|\textit{numparams}\verb|][|\textit{default}\verb|]{|
  \textit{format}\verb|}{|\textit{numargs}\verb|}| \]
For example, the Legendre function, \verb|\LegendreP|, is defined as
\[ \verb|\defSpecFun{LegendreP}[2][]{P^{#1}_{#2}}{1}| \]
(See the file \token{DLMFfcns.sty} for further examples).
The number of arguments that the function takes is indicated by \textit{numargs}, which
must be a number.  If the arguments should be presented other than the default of
a parenthesized list, you should place the argument format in square brackets after \verb|{numargs}|.

Of course, if an important function is missing from the predefined list, please
submit it to us so that it may be included.


\begin{Table}{$\threej, \sixj$ and $\ninej$ markup\label{tab:threejmarkup}.
This special case markup mimics the style of the special functions;
the special forms for derivatives and powers do not apply here, however.}
\begin{Tabular}{llll}
\verb|\threej| & $\threej$ &
\begin{minipage}[t]{2in}
\begin{verbatim}
\threej@{j_1}{j_2}{j_3}
        {m_1}{m_2}{m_3}
\end{verbatim}
\end{minipage}
  & $\threej@{j_1}{j_2}{j_3}{m_1}{m_2}{m_3}$ \\
\verb|\six| & $\sixj$ &
\begin{minipage}[t]{2in}
\begin{verbatim}
\sixj@{j_1}{j_2}{j_3}
      {l_1}{l_2}{l_3}
\end{verbatim}
\end{minipage}
  & $\sixj@{j_1}{j_2}{j_3}{l_1}{l_2}{l_3}$ \\
\verb|\ninej| & $\ninej$ &
\begin{minipage}[t]{2.2in}
\begin{verbatim}
\ninej@{j_{11}}{j_{12}}{j_{13}}
       {j_{21}}{j_{22}}{j_{23}}
       {j_{31}}{j_{32}}{j_{33}}
\end{verbatim}
\end{minipage}
  & $\ninej@{j_{11}}{j_{12}}{j_{13}}{j_{21}}{j_{22}}{j_{23}}{j_{31}}{j_{32}}{j_{33}}$ \\
\end{Tabular}
\end{Table}

\section{Bibliographic Information}\label{sec:bib}
\subsection{General}
Bibliographies should be provided in \BibTeX\ format,  containing complete information
and avoiding abbreviations, other than the journal abbreviations
defined in the \token{mrabbrev.bib} (see App.~\ref{app:manifest}).
It is convenient to use the American Mathematical Society's free 
\token{mrlookup} service to generate \BibTeX\ files; see
\url{http://www.ams.org/mrlookup}.
See \cite[App.~B]{Lamport:1985:LDP} and \cite{Goossens:1994:LC} for more information
on \BibTeX.

Citation tags, like label ID's, are internal \LaTeX\ identifiers.
We adopt the scheme used by the BibNet
 project\footnote{\url{ftp://ftp.math.utah.edu/pub/bibnet/faq.html}}
in which the tag is of the form
\begin{verbatim}
   FirstAuthorLastName:year:key-phrase
\end{verbatim}
For example, the bibliographic tag \texttt{Abramowitz:1964:HMF}  
is used for the original NBS Handbook. 
The \token{key-phrase} is up to 3 upper case initial letters from the first words
in the title, ignoring articles and prepositions. 
Spaces within an author's last name should be
omitted (eg. \texttt{deBoor}), but hyphens should be retained; an acronym (eg.
for an institutional `author') should be given in upper case.
In the rare case where more than one citation has the same key,  
clashes are resolved by appending
a lower case letter, in sequence, to the conflicting tags.

Each chapter will have a References part.  Unnumbered sections (using
\verb|\section*|) can be placed here.  The Airy chapter, for example, 
contains a brief introductory paragraph along the
 lines of ``The main references are \ldots''  in a section ``General References''.
It also has a section ``Original References'' containing an itemization
(using the \verb|description| environment) of the references used in each
section of the body of the chapter (This information duplicates the \verb|\note|
metadata given in the individual sections, but will be useful for the print version).

Finally, the references themselves are included by using 
the \verb|\bibliography| command.

\subsection{Citation Macros}
The \DLMF\ class incorporates a style (\package{natbib}) that cites references by
giving the author and  year. See Table \ref{tab:citemarkup} for
examples. As a general rule, all \package{natbib} citation macros take two optional
arguments: a single optional argument provides `post' text, whereas 
two provide both `pre' and `post' text.  Additionally, the starred form of the
macros inhibits abbreviation of multiple authors.
The simpler forms (\verb|\cite|, \verb|\citet| or \verb|\citep|) are 
generally to be preferred.

\begin{Table}{Citation markup.\label{tab:citemarkup}}
\begin{Tabular}{lll}
\multicolumn{3}{l}{Basic citations}\\
 & \texttt{\BS cite\{Goossens:1994:LC\}} &\cite{Goossens:1994:LC}\\
 & \texttt{\BS cite[ch.~13]\{Goossens:1994:LC\}} &\cite[ch.~13]{Goossens:1994:LC}\\
 & \multicolumn{2}{l}{\texttt{\BS cite[See][ch.~13]\{Goossens:1994:LC\}}} \\
      &&\cite[See][ch.~13]{Goossens:1994:LC}\\
 & \texttt{\BS cite*\{Goossens:1994:LC\}} &\cite*{Goossens:1994:LC}\\
 &\multicolumn{2}{l}{\texttt{\BS cite\{Lamport:1985:LDP,Goossens:1994:LC\}}}\\
     &&\citet{Lamport:1985:LDP,Goossens:1994:LC}\\
\multicolumn{3}{l}{Textual and parenthetic citations}\\
 & \texttt{\BS citet\{Goossens:1994:LC\}} &\citet{Goossens:1994:LC}\\
 & \texttt{\BS citep\{Goossens:1994:LC\}} &\citep{Goossens:1994:LC}\\
\multicolumn{3}{l}{Partial citation forms}\\
 & \texttt{\BS citeauthor\{Goossens:1994:LC\}} &\citeauthor{Goossens:1994:LC}\\
 & \texttt{\BS citeauthor*\{Goossens:1994:LC\}} &\citeauthor*{Goossens:1994:LC}\\
 & \texttt{\BS citeyear\{Goossens:1994:LC\}} &\citeyear{Goossens:1994:LC}\\
 & \texttt{\BS citeyearpar\{Goossens:1994:LC\}} &\citeyearpar{Goossens:1994:LC}\\
\end{Tabular}
\end{Table}

\section{Metadata}\label{sec:meta}
\begin{Table}{Metadata markup.\label{tab:metamarkup}}
\begin{Description}
\item[\texttt{\BS index\{\textit{keyword!...}\}}] 
   attaches a (possibly multi-level) indexing keyword at this point; 
   multiple levels are separated by exclamation marks.
   See \cite[App.~A]{Lamport:1985:LDP} for more details.
\item[\texttt{\BS index*\{\textit{keyword!...}\}}] 
   defines indexing keywords for use online only; these will not be
   included in the printed index.
\item[\texttt{\BS note\{\textit{text}\}}]
   adds general annotation (can include citations).
\item[\texttt{\BS origref[\textit{comment}]\{\textit{label}\}}] 
   Records the NBS Handbook reference number, with optional comment.
%\item[\texttt{\BS reference[\textit{comment}]\{\textit{citekey}\}}] 
%   Records the original source, with optional comment.
%   This is distinct from the usual \verb|\cite| in that the citation
%   does not appear in the main text.
\item[\texttt{\BS constraint\{\textit{text}\}}] 
\item[\texttt{\BS constraint*\{\textit{text}\}}] 
  Notes a constraint, condition or other restriction on the validity
  of a formula. Normally, this constraint is printed at the end of the
  formula, flush right (See \S~\ref{sec:dispmath}).
  The \verb|*| inhibits the display, but it is still added to the database.
  This should be used inside \token{equation} and \token{equationmix}
  environments, after the last formula, but before the last punctuation 
  (if any) and the \verb|\end{equation}|.
\end{Description}
\end{Table}
The macros in Table \ref{tab:metamarkup} are used to provide metadata
about sections and formulas.  Most produce no directly visible output, but
are vital for indexing, searching and `about pages', and should
be used generously.  See \S~10 of the Authors Guide for further information,
and the metadata index of the sample chapter for suggestions.

The previous guide defined a macro \verb|\reference| for recording original
sources.  We currently suggest that you simply include such information
in a \verb|\note|.

The metadata markup should, like \verb|\label|, be placed inside
the body of the section, within the equation environment, or within
the caption of tables or figures.  Since the metadata is associated
with the entity's ID, the \verb|\label| command should always precede the
metadata.

Another useful macro is \verb|\URL{|\textit{url}\verb|}|, which prints
a URL that, in electronic media, acts as a hyperlink to the URL.  This
macro also takes an optional argument which provides text to use as the
printed representation of the URL (instead of printing the URL itself).
Similarly, the macro \verb|\email{user@host.net}| can be used to provide an email
address.

By default, an index and metadata table are appended to the end
of the document, but these can be disabled with the \token{noindex}
and \token{nometa} document class options.

\section{Graphics}\label{sec:graphics}
The \package{graphicx} package is included in the \DLMF\ class, so
you may use the following macro to include an image:
\begin{verbatim}
   \begin{figure}
     \centering\includegraphics[width=3.0in]{picture}
     \caption{A picture.\label{fig:AI.GR.PIC}}
   \end{figure}
\end{verbatim}
Providing the image file is of a common type (\texttt{eps}, \texttt{pdf},\ldots),
you  will not need to explicitly give the filename extension;  this allows the
driver to choose the most appropriate image file for processing.
See the \cite{Goossens:1997:LGC} for more information on its capabilities.

\section{Author Developed Macros}
Less is better.  Please use standard \LaTeX2e definition macros (\verb|\newcommand|),
rather than \TeX\ definitions (\verb|\def|).

\section{Processing the \LaTeX\ files}
The usual conventions for processing the document apply.  Assuming your chapter
were called \token{zz.tex}, you normally would run the sequence of commands:
\begin{verbatim}
   latex zz
   makeindex -s DLMF zz
   bibtex zz
   bibtex zz.meta
   latex zz
   latex zz
\end{verbatim}
If no citations have been added or removed since the last time you processed 
the file, you can omit running \token{bibtex}.  Likewise, if the index entries
have not changed, you can omit running \token{makeindex}.
Also, you only have to run \texttt{latex} until it no longer warns that
``references may have changed''.  

\bibliographystyle{plainnat}
\bibliography{latex.guide}

\appendix
\section{Manifest}\label{app:manifest}
The files defining the DLMF document class are available from the DLMF internal subsite,
in either zip or gzip form:
\begin{itemize}
 \item \url{http://dlmf.nist.gov/internal/resources/DLMFtex.tar.gz},
 \item \url{http://dlmf.nist.gov/internal/resources/DLMFtex.zip}.
\end{itemize}
These files include the main DLMF class, along with style files for \BibTeX\ and
\token{makeindex}. A modified version of the \token{breqn} package, from AMS, is
also included.  The files need to be placed in a directory where \LaTeX\ can find them.
On a unix system, one would typically set environment variables:
\begin{verbatim}
  setenv TEXINPUTS .:/somewhere/DLMFtex:
  setenv BIBINPUTS .:/somewhere/DLMFtex:
  setenv BSTINPUTS .:/somewhere/DLMFtex:
\end{verbatim}
(depending on the shell); A similar set of commands should work for windows.
For other systems, you should consult the documentation for your \LaTeX\ distribution.

The DLMF document class also uses a variety of packages that are generally
included in recent \LaTeX\ distributions.  If you seem to be having difficulties
with missing or obsolete versions of these files, the best solution would be to
upgrade your \LaTeX.  However, if that is not convenient, you can install the required
files from 
\begin{itemize}
 \item \url{http://dlmf.nist.gov/internal/resources/DLMFreqd.tar.gz},
 \item \url{http://dlmf.nist.gov/internal/resources/DLMFreqd.zip}.
\end{itemize}
in a similar fashion to the \token{DLMFtex} files (with appropriate changes to
\texttt{TEXINPUTS}, etc).
Another alternative is to fetch individual files or packages from
CTAN (\url{http://ctan.tug.org/}).

\section{Special Function Macros}\label{app:specfuns}
The following table lists macros for special functions, shown in typical
uses both with and without arguments.  The reference is the
equation number in the original NBS Handbook from which
the list was derived.  Additions will be made as needed.

\clearpage
\begin{landscape}
\input{specfun.table.tex}
\end{landscape}
\end{document}
